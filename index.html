<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>César Perales - Blog Personal</title>
    <meta name="description" content="Blog personal de César Perales sobre programación, algoritmos, simulaciones y pensamientos digitales.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/timeline.css">
    <link rel="icon" type="image/png" href="assets/images/favicon.ico">
    <script src="assets/js/cursor-light.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body>
    <!-- Barra de progreso de lectura -->
    <div class="reading-progress"></div>
    
    <header>
        <div class="container">
            <nav>
                <a href="#" class="logo">CP</a>
                <div class="nav-links">
                    <a href="#">Inicio</a>
                    <!-- <a href="#blog">Blog</a> -->
                    <a href="#sobre-mi">Sobre mí</a>
                    <a href="#proyectos">Proyectos</a>
                    <a href="#contacto">Contacto</a>
                </div>
                <div class="nav-actions">
                    <button class="theme-toggle" aria-label="Cambiar tema">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="mobile-menu-btn" aria-label="Menú">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="inicio" class="hero">
            <div class="container">
                <div class="hero-content">
                    <div class="hero-text animate-fade-in-up">
                        <h1 id="typewriter-name">César Perales</h1>
                        <p class="mb-3">"Creo código que simula vida. Y enseño a otros a hacerlo."</p>
                        <div class="cta-buttons">
                            <a href="#contacto" class="btn btn-primary">
                                <i class="fas fa-envelope"></i> Contactar
                            </a>
                            <a href="#proyectos" class="btn btn-outline">
                                <i class="fas fa-code"></i> Ver proyectos
                            </a>
                        </div>
                        <div class="social-links">
                            <!-- Se llenará dinámicamente con JS -->
                        </div>
                    </div>
                    <div class="hero-image animate-fade-in-up">
                        <img src="perfil.jpg" alt="César Perales" class="profile-img">
                    </div>
                </div>
            </div>
        </section>

        <!-- About Me Section -->
        <section id="sobre-mi" class="section">
            <div class="container">
                <div class="section-title">
                    <h2>Sobre Mí</h2>
                </div>
                
                <div class="about-content">
                    <div class="about-text">
                        <!-- Se llenará dinámicamente con JS -->
                    </div>
                    
                    <div class="skills-section">
                        <div class="skills-carousel">
                            <div class="skills-track">
                                <!-- Se llenará dinámicamente con JS -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <!-- Experiencia Profesional Timeline Section -->
        <section id="experiencia" class="section timeline-section">
            <div class="container">
                <div class="section-title">
                    <h2>Experiencia Profesional</h2>
                </div>
                
                <div class="timeline-container">
                    <div class="timeline-controls">
                        <button class="timeline-control prev-btn" aria-label="Anterior experiencia">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <button class="timeline-control next-btn" aria-label="Siguiente experiencia">
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                    
                    <div class="timeline-wrapper">
                        <div class="timeline-track">
                            <!-- Timeline items will be loaded dynamically -->
                        </div>
                    </div>
                    
                    <div class="timeline-details">
                        <div class="timeline-details-content">
                            <!-- Selected job details will appear here -->
                            <div class="loading-spinner">
                                <i class="fas fa-circle-notch fa-spin"></i>
                                <p>Cargando experiencia profesional...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <!-- Projects Section -->
        <section id="proyectos" class="section">
            <div class="container">
                <div class="section-title">
                    <h2>Proyectos</h2>
                </div>
                
                <div id="projects-grid" class="projects-grid">
                    <!-- Se cargará dinámicamente desde projects.json -->
                    <div class="loading-spinner">
                        <i class="fas fa-circle-notch fa-spin"></i>
                        <p>Cargando proyectos...</p>
                    </div>
                </div>
                
                <div class="text-center mt-4">
                    <a href="proyectos/index.html" class="btn btn-primary">
                        <i class="fas fa-project-diagram"></i> Ver todos los proyectos
                    </a>
                </div>
            </div>
        </section>


        <!-- Blog Section -->
        <section id="blog" class="section" style="display: none;">
            <div class="container">
                <div class="section-title">
                    <h2>Blog Reciente</h2>
                </div>

                <div class="categories-list">
                    <button class="category-button active" data-category="all">Todas las categorías</button>
                    <button class="category-button" data-category="programacion">Programación</button>
                    <button class="category-button" data-category="tutoriales">Tutoriales</button>
                    <button class="category-button" data-category="pensamientos">Pensamientos</button>
                </div>

                <div id="blog-grid" class="blog-grid">
                    <!-- Se cargará dinámicamente desde blog-articles.json -->
                    <div class="loading-spinner">
                        <i class="fas fa-circle-notch fa-spin"></i>
                        <p>Cargando artículos...</p>
                    </div>
                </div>
                
                <div class="text-center mb-3">
                    <a href="blog/index.html" class="btn btn-primary">
                        <i class="fas fa-book-open"></i> Ver todos los artículos
                    </a>
                </div>
            </div>
        </section>


        <!-- Contact Section -->
        <section id="contacto" class="section">
            <div class="container">
                <div class="section-title">
                    <h2>Contacto</h2>
                </div>
                
                <div class="contact-container">
                    <div class="contact-info">
                        <h3>¡Hablemos!</h3>
                        <p>¿Tienes un proyecto en mente? ¿Buscas un profesor particular? ¿O simplemente quieres conversar sobre algoritmos y vida artificial? Escríbeme y responderé lo antes posible.</p>
                        
                        <!-- Los contact-item se llenarán dinámicamente con JS -->
                    </div>
                    
                    <form class="contact-form">
                        <!-- Se llenará dinámicamente con JS -->
                    </form>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-info">
                    <h3>César Perales</h3>
                    <p>Programador, profesor y entusiasta de las simulaciones. Creando código con propósito y compartiendo conocimiento con pasión.</p>
                    
                    <div class="social-links">
                        <!-- Se llenará dinámicamente con JS -->
                    </div>
                </div>
                
                <div class="footer-links">
                    <h4>Secciones</h4>
                    <ul>
                        <li><a href="index.html">Inicio</a></li>
                        <li><a href="blog/index.html">Blog</a></li>
                        <li><a href="#sobre-mi">Sobre mí</a></li>
                        <li><a href="proyectos/index.html">Proyectos</a></li>
                        <li><a href="#contacto">Contacto</a></li>
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h4>Enlaces Rápidos</h4>
                    <ul>
                        <li><a href="blog/index.html">Blog</a></li>
                        <li><a href="proyectos/index.html">Proyectos</a></li>
                        <li><a href="#contacto">Contacto</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 César Perales. Todos los derechos reservados.</p>
                <p class="mb-0">Hecho con <i class="fas fa-heart"></i> y muchas líneas de código.</p>
            </div>
        </div>
    </footer>
    
    <!-- Easter Egg Button -->
    <button class="easter-egg" aria-label="Easter Egg"></button>
    
    <script>
        // Función para cargar los artículos del blog en la página principal
        async function loadRecentBlogArticles() {
            try {
                const response = await fetch('blog/blog-articles.json');
                const data = await response.json();
                
                // Tomar los 3 artículos más recientes
                const recentArticles = data.articles.slice(0, 3);
                
                const blogGrid = document.getElementById('blog-grid');
                blogGrid.innerHTML = '';
                
                // Crear las tarjetas para los artículos recientes
                recentArticles.forEach(article => {
                    const articleCard = document.createElement('article');
                    articleCard.className = 'blog-card';
                    articleCard.dataset.category = article.category;
                    
                    articleCard.innerHTML = `
                        <img src="${article.coverImage}" alt="${article.title}" class="blog-cover-image">
                        <a href="blog/index.html?article=${article.jsonFile}" class="blog-content">
                            <h3>${article.title}</h3>
                            <div class="blog-date">${article.date}</div>
                            <p class="blog-excerpt">${article.excerpt}</p>
                            <div class="blog-footer">
                                <span class="blog-category">${getCategoryName(article.category)}</span>
                                <div class="read-more">Leer más -></div>
                            </div>
                        </a>
                    `;
                    
                    blogGrid.appendChild(articleCard);
                });
                
                // Configurar filtrado de categorías
                document.querySelectorAll('.category-button').forEach(button => {
                    button.addEventListener('click', function() {
                        const category = this.dataset.category;
                        
                        // Actualizar el estado activo del botón
                        document.querySelectorAll('.category-button').forEach(btn => {
                            btn.classList.remove('active');
                        });
                        this.classList.add('active');
                        
                        // Filtrar los artículos
                        document.querySelectorAll('.blog-card').forEach(card => {
                            if (category === 'all' || card.dataset.category === category) {
                                card.style.display = 'block';
                            } else {
                                card.style.display = 'none';
                            }
                        });
                    });
                });
                
            } catch (error) {
                console.error('Error al cargar los artículos del blog:', error);
                document.getElementById('blog-grid').innerHTML = '<div class="error-message">Error al cargar los artículos recientes.</div>';
            }
        }
        
        // Función para cargar los proyectos en la página principal
        async function loadRecentProjects() {
            try {
                const response = await fetch('proyectos/projects.json');
                const data = await response.json();
                
                // Tomar los 3 proyectos más recientes
                const recentProjects = data.projects.slice(0, 3);
                
                const projectsGrid = document.getElementById('projects-grid');
                projectsGrid.innerHTML = '';
                
                // Crear las tarjetas para los proyectos recientes
                recentProjects.forEach(project => {
                    const projectCard = document.createElement('article');
                    projectCard.className = 'blog-card'; // Usar la misma clase que los artículos
                    
                    const skills = [
                        { name: 'JavaScript', icon: 'fa-brands fa-js' },
                        { name: 'Python', icon: 'fa-brands fa-python' },
                        { name: 'Three.js', icon: 'fa-solid fa-shapes'},
                        { name: 'WebGL', icon: 'fas fa-cubes' },
                        { name: 'React', icon: 'fab fa-react' },
                        { name: 'Node.js', icon: 'fab fa-node-js' },
                        { name: 'Física Simulada', icon: 'fas fa-atom' },
                    ];

                    // Construir el HTML para las etiquetas de habilidades
                    const skillsHTML = project.skills.map(skill => 
                        `<div class="project-tag">` +
                        `<i class="${skills.find(s => s.name.toLowerCase() === skill.toLowerCase())?.icon || 'fas fa-code'}"></i> ${skill}` +
                        `</div>`
                    ).join('')
                    
                    projectCard.innerHTML = `
                        <img src="${project.coverImage}" alt="${project.title}" class="blog-cover-image">
                        <a href="proyectos/index.html?project=${project.jsonFile}" class="blog-content">
                            <h3>${project.title}</h3>
                            <div class="blog-date">${project.date}</div>
                            <p class="blog-excerpt">${project.excerpt}</p>
                            <div class="project-tags">
                                ${skillsHTML}
                            </div>
                            <div href="proyectos/index.html?project=${project.jsonFile}" class="read-more">Ver proyecto -></div>
                        </a>
                    `;
                    
                    projectsGrid.appendChild(projectCard);
                });
                
            } catch (error) {
                console.error('Error al cargar los proyectos:', error);
                document.getElementById('projects-grid').innerHTML = '<div class="error-message">Error al cargar los proyectos recientes.</div>';
            }
        }
        
        // Función para cargar la línea de tiempo de experiencia profesional
        async function loadExperienceTimeline() {
            try {
                const response = await fetch('assets/data/site-data.json');
                const data = await response.json();
                
                if (!data.experiencia || !data.experiencia.trabajos || !data.experiencia.trabajos.length) {
                    throw new Error('No se encontraron datos de experiencia laboral');
                }
                
                const timelineTrack = document.querySelector('.timeline-track');
                const timelineDetails = document.querySelector('.timeline-details-content');
                
                // Limpiar contenedores
                timelineTrack.innerHTML = '';
                
                // Crear línea temporal
                data.experiencia.trabajos.forEach((job, index) => {
                    const timelineItem = document.createElement('div');
                    timelineItem.className = `timeline-item ${index === 0 ? 'active' : ''}`;
                    timelineItem.dataset.index = index;
                    
                    // Crear años como puntos en la línea
                    timelineItem.innerHTML = `
                        <div class="timeline-point"></div>
                        <div class="timeline-date">${job.periodo}</div>
                    `;
                    
                    timelineTrack.appendChild(timelineItem);
                    
                    // Añadir evento de clic
                    timelineItem.addEventListener('click', () => {
                        selectTimelineItem(index);
                    });
                });
                
                // Mostrar el primer trabajo por defecto
                showJobDetails(0);
                
                // Configurar controles de navegación
                const prevBtn = document.querySelector('.prev-btn');
                const nextBtn = document.querySelector('.next-btn');
                
                prevBtn.addEventListener('click', () => {
                    const activeItem = document.querySelector('.timeline-item.active');
                    const currentIndex = parseInt(activeItem.dataset.index);
                    const prevIndex = Math.max(0, currentIndex - 1);
                    selectTimelineItem(prevIndex);
                });
                
                nextBtn.addEventListener('click', () => {
                    const activeItem = document.querySelector('.timeline-item.active');
                    const currentIndex = parseInt(activeItem.dataset.index);
                    const nextIndex = Math.min(data.experiencia.trabajos.length - 1, currentIndex + 1);
                    selectTimelineItem(nextIndex);
                });
                
                // Configurar desplazamiento horizontal
                const timelineWrapper = document.querySelector('.timeline-wrapper');
                let isDown = false;
                let startX;
                let scrollLeft;
                
                timelineWrapper.addEventListener('mousedown', (e) => {
                    isDown = true;
                    timelineWrapper.classList.add('active');
                    startX = e.pageX - timelineWrapper.offsetLeft;
                    scrollLeft = timelineWrapper.scrollLeft;
                });
                
                timelineWrapper.addEventListener('mouseleave', () => {
                    isDown = false;
                    timelineWrapper.classList.remove('active');
                });
                
                timelineWrapper.addEventListener('mouseup', () => {
                    isDown = false;
                    timelineWrapper.classList.remove('active');
                });
                
                timelineWrapper.addEventListener('mousemove', (e) => {
                    if (!isDown) return;
                    e.preventDefault();
                    const x = e.pageX - timelineWrapper.offsetLeft;
                    const walk = (x - startX) * 2; // Velocidad de desplazamiento
                    timelineWrapper.scrollLeft = scrollLeft - walk;
                });
                
                // También permite desplazamiento táctil
                timelineWrapper.addEventListener('touchstart', (e) => {
                    startX = e.touches[0].pageX - timelineWrapper.offsetLeft;
                    scrollLeft = timelineWrapper.scrollLeft;
                });
                
                timelineWrapper.addEventListener('touchmove', (e) => {
                    if (!startX) return;
                    const x = e.touches[0].pageX - timelineWrapper.offsetLeft;
                    const walk = (x - startX) * 2;
                    timelineWrapper.scrollLeft = scrollLeft - walk;
                });
                
            } catch (error) {
                console.error('Error al cargar la línea de tiempo:', error);
                document.querySelector('.timeline-track').innerHTML = 
                    '<div class="error-message"><h3>Error al cargar la experiencia laboral</h3><p>No se pudieron cargar los datos.</p></div>';
            }
        }
        
        // Función para seleccionar un item de la línea temporal
        function selectTimelineItem(index) {
            // Actualizar clases activas
            document.querySelectorAll('.timeline-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const selectedItem = document.querySelector(`.timeline-item[data-index="${index}"]`);
            selectedItem.classList.add('active');
            
            // Asegurar que el elemento seleccionado es visible
            const timelineWrapper = document.querySelector('.timeline-wrapper');
            timelineWrapper.scrollLeft = selectedItem.offsetLeft - (timelineWrapper.clientWidth / 2) + (selectedItem.clientWidth / 2);
            
            // Mostrar detalles del trabajo
            showJobDetails(index);
        }
        
        // Función para mostrar los detalles de un trabajo
        async function showJobDetails(index) {
            try {
                const response = await fetch('assets/data/site-data.json');
                const data = await response.json();
                
                const job = data.experiencia.trabajos[index];
                const detailsContainer = document.querySelector('.timeline-details-content');
                
                // Generar HTML para tecnologías
                const techHTML = job.tecnologias.map(tech => 
                    `<span class="job-tech">${tech}</span>`
                ).join('');
                
                // Generar HTML para hitos
                const hitosHTML = job.hitos.map(hito => 
                    `<li><i class="fas fa-check-circle"></i> ${hito}</li>`
                ).join('');
                
                detailsContainer.innerHTML = `
                    <div class="job-header">
                        <div class="job-title-container">
                            <h3 class="job-title">${job.cargo}</h3>
                            <div class="job-company">${job.empresa}</div>
                            <div class="job-period"><i class="far fa-calendar-alt"></i> ${job.periodo}</div>
                        </div>
                        ${job.logo ? `
                        <div class="job-logo">
                            <img src="${job.logo}" alt="${job.empresa} logo" onerror="this.src='assets/images/default-logo.png'; this.onerror=null;">
                        </div>
                        ` : ''}
                    </div>
                    
                    <div class="job-description">
                        <p>${job.descripcion}</p>
                    </div>
                    
                    <div class="job-tech-container">
                        <h4><i class="fas fa-code"></i> Tecnologías utilizadas</h4>
                        <div class="job-tech-list">
                            ${techHTML}
                        </div>
                    </div>
                    
                    <div class="job-achievements">
                        <h4><i class="fas fa-trophy"></i> Logros destacados</h4>
                        <ul class="job-achievements-list">
                            ${hitosHTML}
                        </ul>
                    </div>
                `;
                
                // Animar la entrada de los detalles
                detailsContainer.classList.add('animate');
                setTimeout(() => {
                    detailsContainer.classList.remove('animate');
                }, 500);
                
            } catch (error) {
                console.error('Error al mostrar detalles del trabajo:', error);
            }
        }
        
        // Función auxiliar para obtener el nombre de la categoría
        function getCategoryName(categorySlug) {
            const categories = {
                'programacion': 'Programación',
                'tutoriales': 'Tutoriales',
                'pensamientos': 'Pensamientos'
            };
            
            return categories[categorySlug] || categorySlug;
        }
        
        // Cargar los contenidos dinámicos cuando se carga la página
        document.addEventListener('DOMContentLoaded', function() {
            loadRecentBlogArticles();
            loadRecentProjects();
            loadExperienceTimeline();
        });
    </script>
    <script>
        emailjs.init("qNnIU_kmgunz6zJYb");
    </script>
    <script src="assets/js/script.js"></script>
</body>
</html>